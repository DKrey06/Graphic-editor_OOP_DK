<Window x:Class="Graphic_editor_DK.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        xmlns:enums="clr-namespace:Graphic_editor_DK.Utilities.Enums"
        Title="Graphic Editor DK - DKREY_06" 
        Height="700" Width="1000"
        WindowStartupLocation="CenterScreen"
        Icon="Resources/Images/LogoCat.png"
        MouseMove="Window_MouseMove">

    <Grid Background="White">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#007ACC" Height="60">
            <DockPanel>
                <Image Source="Resources/Images/LogoCat.png" 
                       Width="40" Height="40" 
                       Margin="10,0" 
                       DockPanel.Dock="Left"
                       VerticalAlignment="Center"/>
                <TextBlock Text="Graphic Editor DK" 
                          FontSize="18" 
                          FontWeight="Bold" 
                          Foreground="White"
                          VerticalAlignment="Center"
                          DockPanel.Dock="Left"/>
                <TextBlock Text="DKREY_06" 
                          FontSize="14" 
                          FontStyle="Italic"
                          Foreground="#E0E0E0"
                          VerticalAlignment="Center"
                          HorizontalAlignment="Right"
                          Margin="0,0,20,0"/>
            </DockPanel>
        </Border>

        <Menu Grid.Row="1" Background="#F0F0F0">
            <MenuItem Header="Файл" Foreground="Black">
                <MenuItem Header="Новый" Command="{Binding NewCommand}"/>
                <MenuItem Header="Открыть..." Command="{Binding OpenCommand}"/>
                <MenuItem Header="Сохранить" Command="{Binding SaveCommand}"/>
                <Separator/>
                <MenuItem Header="Экспорт в изображение..." Command="{Binding ExportCommand}"/>
                <Separator/>
                <MenuItem Header="Выход" Command="{Binding ExitCommand}"/>
            </MenuItem>
            <MenuItem Header="Правка" Foreground="Black">
                <MenuItem Header="Очистить холст" Command="{Binding NewCommand}"/>
            </MenuItem>
            <MenuItem Header="Вид" Foreground="Black">
            </MenuItem>
            <MenuItem Header="Инструменты" Foreground="Black">
            </MenuItem>
        </Menu>

        <ToolBar Grid.Row="2" Background="#E8E8E8">
            <ComboBox x:Name="ToolsComboBox" 
                      Width="150" 
                      Height="28" 
                      Margin="10,0,5,0"
                      SelectionChanged="ToolsComboBox_SelectionChanged">
                <ComboBoxItem Content="Курсор" Tag="Selection"/>
                <ComboBoxItem Content="Линия" Tag="Line"/>
                <ComboBoxItem Content="Прямоугольник" Tag="Rectangle"/>
                <ComboBoxItem Content="Эллипс" Tag="Ellipse"/>
                <ComboBoxItem Content="Треугольник" Tag="Triangle"/>
                <ComboBoxItem Content="Кисть" Tag="Brush"/>
                <ComboBoxItem Content="Текст" Tag="Text"/>
                <ComboBoxItem Content="Ластик" Tag="Eraser"/>
            </ComboBox>

            <Separator/>

            <Button ToolTip="Курсор"
                    Command="{Binding SetToolCommand}"
                    CommandParameter="{x:Static enums:ToolType.Selection}"
                    Style="{StaticResource ToolButtonStyle}">
                <TextBlock Style="{StaticResource SelectionIcon}"/>
            </Button>
            <Button ToolTip="Линия"
                    Command="{Binding SetToolCommand}"
                    CommandParameter="{x:Static enums:ToolType.Line}"
                    Style="{StaticResource ToolButtonStyle}">
                <TextBlock Style="{StaticResource LineIcon}"/>
            </Button>
            <Button ToolTip="Прямоугольник"
                    Command="{Binding SetToolCommand}"
                    CommandParameter="{x:Static enums:ToolType.Rectangle}"
                    Style="{StaticResource ToolButtonStyle}">
                <TextBlock Style="{StaticResource RectangleIcon}"/>
            </Button>
            <Button ToolTip="Эллипс"
                    Command="{Binding SetToolCommand}"
                    CommandParameter="{x:Static enums:ToolType.Ellipse}"
                    Style="{StaticResource ToolButtonStyle}">
                <TextBlock Style="{StaticResource EllipseIcon}"/>
            </Button>
            <Button ToolTip="Треугольник"
                    Command="{Binding SetToolCommand}"
                    CommandParameter="{x:Static enums:ToolType.Triangle}"
                    Style="{StaticResource ToolButtonStyle}">
                <TextBlock Style="{StaticResource TriangleIcon}"/>
            </Button>

            <Separator/>

            <Button ToolTip="Кисть"
                    Command="{Binding SetToolCommand}"
                    CommandParameter="{x:Static enums:ToolType.Brush}"
                    Style="{StaticResource ToolButtonStyle}">
                <TextBlock Style="{StaticResource BrushIcon}"/>
            </Button>
            <Button ToolTip="Текст"
                    Command="{Binding SetToolCommand}"
                    CommandParameter="{x:Static enums:ToolType.Text}"
                    Style="{StaticResource ToolButtonStyle}">
                <TextBlock Style="{StaticResource TextIcon}"/>
            </Button>
            <Button ToolTip="Ластик"
                    Command="{Binding SetToolCommand}"
                    CommandParameter="{x:Static enums:ToolType.Eraser}"
                    Style="{StaticResource ToolButtonStyle}">
                <TextBlock Style="{StaticResource EraserIcon}"/>
            </Button>

            <Separator/>

            <StackPanel Orientation="Horizontal" Margin="10,0">
                <TextBlock Text="Цвет обводки:" 
                          VerticalAlignment="Center" 
                          Margin="0,0,5,0"
                          FontWeight="SemiBold"/>

                <Border BorderBrush="Gray" BorderThickness="1" Margin="0,0,15,0">
                    <Button Command="{Binding ShowColorPickerCommand}" 
                            CommandParameter="Stroke"
                            Width="30" Height="25"
                            ToolTip="Выбрать цвет обводки">
                        <Button.Background>
                            <SolidColorBrush Color="{Binding ColorPaletteService.SelectedStrokeColor}"/>
                        </Button.Background>
                    </Button>
                </Border>

                <TextBlock Text="Цвет заливки:" 
                          VerticalAlignment="Center" 
                          Margin="0,0,5,0"
                          FontWeight="SemiBold"/>

                <Border BorderBrush="Gray" BorderThickness="1" Margin="0,0,15,0">
                    <Button Command="{Binding ShowColorPickerCommand}" 
                            CommandParameter="Fill"
                            Width="30" Height="25"
                            ToolTip="Выбрать цвет заливки">
                        <Button.Background>
                            <SolidColorBrush Color="{Binding ColorPaletteService.SelectedFillColor}"/>
                        </Button.Background>
                    </Button>
                </Border>
            </StackPanel>

            <Separator/>

            <TextBlock Text="Размер:" 
                      VerticalAlignment="Center" 
                      Margin="10,0,5,0"
                      FontWeight="SemiBold"/>
            <ComboBox x:Name="BrushSizeComboBox" 
                      Width="80"
                      SelectionChanged="BrushSizeComboBox_SelectionChanged">
                <ComboBoxItem Content="1px" Tag="1"/>
                <ComboBoxItem Content="3px" Tag="3"/>
                <ComboBoxItem Content="5px" Tag="5"/>
                <ComboBoxItem Content="8px" Tag="8"/>
                <ComboBoxItem Content="12px" Tag="12"/>
            </ComboBox>
        </ToolBar>

        <ScrollViewer Grid.Row="3" 
                      HorizontalScrollBarVisibility="Auto" 
                      VerticalScrollBarVisibility="Auto"
                      Background="#E8E8E8"
                      Padding="15">
            <Border Background="White" 
                    BorderBrush="#A0A0A0" 
                    BorderThickness="2"
                    CornerRadius="4">
                <Canvas x:Name="DrawingCanvas" 
                        Background="White" 
                        MinWidth="1200" 
                        MinHeight="800"
                        MouseDown="DrawingCanvas_MouseDown"
                        MouseMove="DrawingCanvas_MouseMove"
                        MouseUp="DrawingCanvas_MouseUp"/>
            </Border>
        </ScrollViewer>

        <StatusBar Grid.Row="4" Background="#007ACC">
            <StatusBarItem>
                <TextBlock x:Name="CoordinatesText" 
                          Text="X: 0, Y: 0" 
                          FontWeight="SemiBold"
                          Foreground="White"/>
            </StatusBarItem>
            <StatusBarItem>
                <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}"/>
            </StatusBarItem>
            <StatusBarItem>
                <TextBlock x:Name="CurrentToolText" 
                          Text="Инструмент: Курсор" 
                          FontWeight="SemiBold"
                          Foreground="White"/>
            </StatusBarItem>
            <StatusBarItem>
                <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}"/>
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock Text="Graphic Editor DK © 2025" 
                          FontSize="10"
                          Foreground="#C0C0C0"
                          Margin="0,0,10,0"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>